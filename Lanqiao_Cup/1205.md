# 1205.区间最大值

新知识：st表

```cpp
#include<bits/stdc++.h>
const int N = 5e5+3;
int a[N],st[N][21];

int getMax(int l, int r)
{
    int k = log(r - l + 1) / log(2);
    return std::max(st[l][k], st[r - (1 << k) + 1][k]);
}

void solve()
{
    int l, r;
    std::cin >> l >> r;
    std::cout << getMax(l, r) <<'\n';
}

int main()
{
    std::ios::sync_with_stdio(false),std::cin.tie(nullptr),std::cout.tie(nullptr);
    int n, q;
    std::cin >> n >> q;
    for (int i = 1; i <= n; i++) std::cin >> a[i];

    for (int i = 1; i <= n; i++) st[i][0] = a[i];
    for (int j = 1; j <= 20; j++)
    {
        for (int i = 1; i <= n; i++)
        {
            // 注意判断区间是否合法
            if (i + (1 << j) - 1 <= n)
            {
                st[i][j] = std::max(st[i][j-1], st[i+(1 << (j - 1))][j-1]);
            }
        }
    }

    while (q--) solve();
    return 0;
}
```