# 498.回文日期

- 这题不好说难不难，但是绝对是很繁琐
- 需要对判断日期是否合法有一套较为清晰完整的处理流程才能做好
- 这里简单总结一下:
- 功能函数:1.string转int; 2.int转string(位数不够时需注意补位); 3.判断闰年; 4.判断日期是否合法; 5.判断回文串; 6.判断 ABABBABA 型回文串(建立在函数 5 的基础上)
- 在这一句中，为了压行导致我忽略掉了left++和right--，导致陷入了死循环，查了好久才发现，确实是疏忽了
```cpp
if (str[left] != str[right])return false;
```
- 真是应了那一句话："会 ≠ 对"
- 我认为这题更重要的点还是在于提醒我要背一背关于日期判断的版子
- 如果我 23 年能多关注一下这个问题，24 年的蓝桥杯就不会出现第一题直接白给了，看了看排名，确实是和省一擦肩而过，哎

```cpp
#include<bits/stdc++.h>

int string2Int(std::string str)
{
    int res = 0;
    for (const auto &i : str) res = res * 10 + (i-'0');
    return res;
}

std::string int2String(int num, int len)
{
    std::string s;
    while (num)
    {
        s +=  (num % 10) + '0';
        num /= 10;
    }
    while (s.size() < len) s += '0';
    std::reverse(s.begin(),s.end());
    return s;
}

bool isLeapYear(int year)
{
    if (year % 4 ==0 && year % 100 != 0 || year % 400 == 0) return true;
    else return false;
}

bool isValideDate(int year, int month, int day)
{
    int days[13] = {0,31,28,31,30,31,30,31,31,30,31,30,31};
    if (isLeapYear(year)) days[2] = 29;
    return day < days[month];
}

bool isPalindromeString(std::string str)
{
    int left = 0,right = str.size() -1;
    while (left < right)
    {
        if (str[left++] != str[right--])return false;
    }
    return true;
}

bool isABABBABAString(std::string str)
{
    // 使用时首先需要通过 isPalindromeString 函数保证传入的 str 是一个回文串
    // 即至少为 ABCDDCBA
    // 此时只需要判断 A == C && B == D是否成立
    if (str[0] == str[2] && str[1] == str[3]) return true;
    else return false;
}

int main()
{
    std::ios::sync_with_stdio(false),std::cin.tie(nullptr),std::cout.tie(nullptr);
    std::string s;
    std::cin>>s;
    int year = string2Int(s.substr(0,4));
    int month = string2Int(s.substr(4,2));
    int day = string2Int(s.substr(6,2));

    bool ans1 = false, ans2 = false;
    for (int i = year; i <= 9999; i++)
    {
        std::string s_year = int2String(i,4);
        for (int j = 1; j <= 12; j ++)
        {
            if (i == year && j < month) continue;
            std::string s_month = int2String(j,2);
            for (int k = 1; k <= 31; k ++)
            {
                if (i == year && j == month && k <= day) continue;
                if (!isValideDate(i,j,k)) continue;
                std::string s_day = int2String(k,2);
                // 日期合法，组成字符串
                std::string date = s_year + s_month + s_day;
                if (isPalindromeString(date))
                {
                    if (ans1 == false)
                    {
                        ans1 = true;
                        std::cout<<date<<'\n';
                    }

                    if (isABABBABAString(date) && ans2 == false)
                    {
                        std::cout<<date<<'\n';
                        return 0;
                    }
                }
            }
        }
    }
    return 0;
}
```